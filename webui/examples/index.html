<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
	<head>
		<title>Example</title>
		
		<style type="text/css" title="currentStyle">
			@import "media/css/demo_page.css";
			@import "media/css/demo_table.css";
		</style>

		<script type="text/javascript" language="javascript" src="media/js/jquery.js"></script>

		<script type="text/javascript" language="javascript" src="media/js/jquery.dataTables.js"></script>
	
		<script type="text/javascript" language="javascript" src="media/js/date.js"></script>
		
		<script type="text/javascript">
			$(document).ready(function() {
				var torrentHeadings = [
					{ "sTitle": "Name" },
					{ "sTitle": "Seeds" },
					{ "sTitle": "Leechers" },
					{ "sTitle": "Completed" },
					{
						"sTitle": "Added",
						"fnRender": function (oObj) {
							return Date.parse(oObj.aData[4]).toString('MMMM d, yyyy');
						},
						"bUseRendered": false
					}
				];

				var torrentData = [];

				var URL = 'http://localhost:4000/webui?callback=?';

				function populateTable() {
					$.getJSON(URL, {}, function (torrents) {
						if (torrents.length == 0) {
							setTimeout("populateTable()", 5000);
							return;
						}

						$.each(torrents, function(i, torrent) {
							torrentData.push([torrent.name, torrent.seeds, torrent.leechers, torrent.completed, torrent.pub_date]);
						});
					
						$('#demo').html('<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>');
				
						$('#example').dataTable({
							"aaData": torrentData,
							"aoColumns": torrentHeadings,
							"bPaginate": false,
							"aaSorting": [[4, 'desc']],
							"bSortClasses": false
						});
					});	
				}
								
				populateTable();
			});
		</script>
		
		<style type="text/css">
			#demo { width: 75%; margin: auto; font-size: 85%; font-family: sans-serif;}
		</style>
	</head>
	
	<body>
		<h1>Torrents</h1>
		
		<div id="demo">
			Loading&hellip;
		</div>

	</body>
	
</html>